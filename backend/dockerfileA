FROM python:3.9-slim

# Set working directory
WORKDIR /app

# Copy and install dependencies for backend1
COPY backend1/requirements.txt ./
RUN pip install --no-cache-dir -r requirements.txt

# Copy backend1 source code
COPY backend1/ ./

# Expose port for backend1
EXPOSE 5001

# Copy and install dependencies for backend2
COPY backend2/requirements.txt ./
RUN pip install --no-cache-dir -r requirements.txt

# Copy backend2 source code
COPY backend2/ ./

# Expose port for backend2
EXPOSE 5002

# Command to run both backend services
CMD ["python", "backend1/app.py"] && ["python", "backend2/app.py"]

